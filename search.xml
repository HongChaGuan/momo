<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>自建开源镜像站</title>
      <link href="/%E8%87%AA%E5%BB%BA%E5%BC%80%E6%BA%90%E9%95%9C%E5%83%8F%E7%AB%99/"/>
      <url>/%E8%87%AA%E5%BB%BA%E5%BC%80%E6%BA%90%E9%95%9C%E5%83%8F%E7%AB%99/</url>
      
        <content type="html"><![CDATA[<p><em><strong>项目地址<a href="https://github.com/chn-lee-yumi/mirrors-gdut">Mirrors</a></strong></em></p><h4 id="部署文档"><a href="#部署文档" class="headerlink" title="部署文档"></a>部署文档</h4><h5 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h5><p>创建名为<code>mirror</code>的用户，将存储盘挂载到<code>/mnt/mirror</code>并设置权限。切换到<code>mirror</code>用户，在家目录下执行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/chn-lee-yumi/mirrors-gdut.git<br>git clone https://salsa.debian.org/mirror-team/archvsync.git  # 用于debian的同步<br>mkdir /home/mirror/tmp<br>mkdir /home/mirror/bin<br>mkdir /home/mirror/etc<br>mkdir /home/mirror/nginx_cache<br>mkdir /home/mirror/nexus<br>cp archvsync/bin/* bin<br>cp mirrors-gdut/etc/ftpsync.conf etc<br>cp mirrors-gdut/pages/* /mnt/mirror/<br><br>cat /home/mirror/mirrors-gdut/crontab<br>crontab -e  # 将上面cat的内容复制粘贴进来，然后保存<br></code></pre></td></tr></table></figure><p>然后坐等一两天等镜像同步完成。</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> 文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker安装</title>
      <link href="/docker%E5%AE%89%E8%A3%85/"/>
      <url>/docker%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h3 id="清华源"><a href="#清华源" class="headerlink" title="清华源"></a>清华源</h3><p>如果你过去安装过 docker，先删掉:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-built_in">get</span> <span class="hljs-built_in">remove</span> docker docker-engine docker.io<br></code></pre></td></tr></table></figure><p>首先安装依赖:</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">apt</span>-<span class="hljs-meta">get</span> install apt-transport-https ca-certificates curl gnupg2 software-properties-<span class="hljs-meta">common</span><br></code></pre></td></tr></table></figure><p>根据你的发行版，下面的内容有所不同。你使用的发行版： </p><h5 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h5><p>信任 Docker 的 GPG 公钥:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -fsSL https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>debian/gpg | apt-key add -<br></code></pre></td></tr></table></figure><p>对于 amd64 架构的计算机，添加软件仓库:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">add</span>-apt-repository \<br>   <span class="hljs-comment">&quot;deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian \</span><br>   $(lsb_release -<span class="hljs-keyword">cs</span>) \<br>   stable<span class="hljs-comment">&quot;</span><br></code></pre></td></tr></table></figure><p>如果你是树莓派或其它 ARM 架构计算机，请运行:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&quot;deb [arch=armhf] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian \</span><br><span class="hljs-string">     $(lsb_release -cs) stable&quot;</span> | \<br>     tee <span class="hljs-regexp">/etc/</span>apt<span class="hljs-regexp">/sources.list.d/</span>docker.list<br></code></pre></td></tr></table></figure><h5 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h5><p>信任 Docker 的 GPG 公钥:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -fsSL https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/u</span>buntu/gpg |  apt-key add -<br></code></pre></td></tr></table></figure><p>对于 amd64 架构的计算机，添加软件仓库:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">add</span>-apt-repository \<br>   <span class="hljs-comment">&quot;deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \</span><br>   $(lsb_release -<span class="hljs-keyword">cs</span>) \<br>   stable<span class="hljs-comment">&quot;</span><br></code></pre></td></tr></table></figure><p>如果你是树莓派或其它 ARM 架构计算机，请运行:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&quot;deb [arch=armhf] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \</span><br><span class="hljs-string">     $(lsb_release -cs) stable&quot;</span> | \<br>     tee <span class="hljs-regexp">/etc/</span>apt<span class="hljs-regexp">/sources.list.d/</span>docker.list<br></code></pre></td></tr></table></figure><p>最后安装</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-built_in">get</span> update<br>apt-<span class="hljs-built_in">get</span> install docker-ce<br></code></pre></td></tr></table></figure><h5 id="Fedora-x2F-CentOS-x2F-RHEL"><a href="#Fedora-x2F-CentOS-x2F-RHEL" class="headerlink" title="Fedora&#x2F;CentOS&#x2F;RHEL"></a>Fedora&#x2F;CentOS&#x2F;RHEL</h5><p>如果你之前安装过 docker，请先删掉</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">yum <span class="hljs-built_in">remove</span> docker docker-common docker-selinux docker-engine<br></code></pre></td></tr></table></figure><p>安装一些依赖</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">yum</span> install -y yum-utils device-mapper-persistent-<span class="hljs-class"><span class="hljs-keyword">data</span> lvm2 wget</span><br></code></pre></td></tr></table></figure><p>根据你的发行版下载repo文件:<br>CentOS&#x2F;RHEL</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget -O <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/docker-ce.repo https:/</span><span class="hljs-regexp">/download.docker.com/</span>linux<span class="hljs-regexp">/centos/</span>docker-ce.repo<br></code></pre></td></tr></table></figure><p>把软件仓库地址替换为 TUNA:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+&#x27;</span> <span class="hljs-regexp">/etc/yum</span>.repos.d/docker-ce.repo<br></code></pre></td></tr></table></figure><p>最后安装:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum makecache fast<br>yum <span class="hljs-keyword">install</span> docker-ce<br></code></pre></td></tr></table></figure><h3 id="阿里云"><a href="#阿里云" class="headerlink" title="阿里云"></a>阿里云</h3><p>安装必要的一些系统工具</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-built_in">get</span> update<br>apt-<span class="hljs-built_in">get</span> -y install apt-transport-https ca-certificates curl software-properties-common<br></code></pre></td></tr></table></figure><h5 id="Debian-1"><a href="#Debian-1" class="headerlink" title="Debian"></a>Debian</h5><p>安装GPG证书</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -fsSL https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/debian/g</span>pg |  apt-key add -<br></code></pre></td></tr></table></figure><p>写入软件源信息</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">add</span><span class="language-bash">-apt-repository <span class="hljs-string">&quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/debian <span class="hljs-subst">$(lsb_release -cs)</span> stable&quot;</span></span><br></code></pre></td></tr></table></figure><p>更新并安装Docker-CE</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-built_in">get</span> -y update<br>apt-<span class="hljs-built_in">get</span> -y install docker-ce<br></code></pre></td></tr></table></figure><h5 id="Ubuntu-1"><a href="#Ubuntu-1" class="headerlink" title="Ubuntu"></a>Ubuntu</h5><p>安装GPG证书</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -fsSL https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/ubuntu/g</span>pg |  apt-key add -<br></code></pre></td></tr></table></figure><p>写入软件源信息</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">add</span><span class="language-bash">-apt-repository <span class="hljs-string">&quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="hljs-subst">$(lsb_release -cs)</span> stable&quot;</span></span><br></code></pre></td></tr></table></figure><p>更新并安装Docker-CE</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-built_in">get</span> -y update<br>apt-<span class="hljs-built_in">get</span> -y install docker-ce<br></code></pre></td></tr></table></figure><h5 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h5><p>安装必要的一些系统工具</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">yum</span> install -y yum-utils device-mapper-persistent-<span class="hljs-class"><span class="hljs-keyword">data</span> lvm2</span><br></code></pre></td></tr></table></figure><p>添加软件源信息</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">yum-config-manager --add-repo https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/centos/</span>docker-ce.repo<br></code></pre></td></tr></table></figure><p>写入软件源信息</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s+download.docker.com+mirrors.aliyun.com/docker-ce+&#x27;</span> <span class="hljs-regexp">/etc/yum</span>.repos.d/docker-ce.repo<br></code></pre></td></tr></table></figure><p>更新并安装Docker-CE</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum makecache fast<br>yum -y <span class="hljs-keyword">install</span> docker-ce<br></code></pre></td></tr></table></figure><p>开启Docker服务</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">service docker <span class="hljs-literal">start</span><br></code></pre></td></tr></table></figure><h5 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h5><p>官方软件源默认启用了最新的软件，您可以通过编辑软件源的方式获取各个版本的软件包。例如官方并没有将测试版本的软件源置为可用，您可以通过以下方式开启。同理可以开启各种测试版本等。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/yum</span>.repos.d/docker-ce.repo<br></code></pre></td></tr></table></figure><p>将[docker-ce-test]下方的enabled&#x3D;0修改为enabled&#x3D;1</p><h5 id="安装指定版本的Docker-CE"><a href="#安装指定版本的Docker-CE" class="headerlink" title="安装指定版本的Docker-CE:"></a>安装指定版本的Docker-CE:</h5><p>1.查找Docker-CE的版本:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">yum</span> list docker-ce.x86_64 --showduplicates | sort -r<br>   <span class="hljs-attribute">Loading</span> mirror speeds from cached hostfile<br>   <span class="hljs-attribute">Loaded</span> plugins: branch, fastestmirror, langpacks<br>   <span class="hljs-attribute">docker</span>-ce.x86_64            <span class="hljs-number">17</span>.<span class="hljs-number">03</span>.<span class="hljs-number">1</span>.ce-<span class="hljs-number">1</span>.el7.centos            docker-ce-stable<br>   <span class="hljs-attribute">docker</span>-ce.x86_64            <span class="hljs-number">17</span>.<span class="hljs-number">03</span>.<span class="hljs-number">1</span>.ce-<span class="hljs-number">1</span>.el7.centos            @docker-ce-stable<br>   <span class="hljs-attribute">docker</span>-ce.x86_64            <span class="hljs-number">17</span>.<span class="hljs-number">03</span>.<span class="hljs-number">0</span>.ce-<span class="hljs-number">1</span>.el7.centos            docker-ce-stable<br>   <span class="hljs-attribute">Available</span> Packages<br></code></pre></td></tr></table></figure><p>2.安装指定版本的Docker-CE: (VERSION例如上面的17.03.0.ce.1-1.el7.centos)</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum -y <span class="hljs-keyword">install</span> docker-ce-[VERSION]<br></code></pre></td></tr></table></figure><h3 id="Docker加速"><a href="#Docker加速" class="headerlink" title="Docker加速"></a>Docker加速</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir -p <span class="hljs-regexp">/etc/</span>docker<br>tee <span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://0qjk30w5.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br>EOF<br>systemctl daemon-reload<br>systemctl restart docker<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESXI_8.0_KEY</title>
      <link href="/esxi-8-0-key/"/>
      <url>/esxi-8-0-key/</url>
      
        <content type="html"><![CDATA[<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ESXi</span> <span class="hljs-number">8</span> <span class="hljs-number">4</span>V492-<span class="hljs-number">44210</span>-<span class="hljs-number">48830</span>-<span class="hljs-number">931</span>GK-<span class="hljs-number">2</span>PRJ4<br><br><span class="hljs-attribute">VCSA</span> <span class="hljs-number">8</span> <span class="hljs-number">0</span>Z20K-<span class="hljs-number">07</span>JEH-<span class="hljs-number">08030</span>-<span class="hljs-number">908</span>EP-<span class="hljs-number">1</span>CUK4<br><br>   <br><br><br><span class="hljs-attribute">ESXi</span> <span class="hljs-number">8</span> <span class="hljs-number">4</span>F40H-<span class="hljs-number">4</span>ML1K-M89U0-<span class="hljs-number">0</span>C2N4-<span class="hljs-number">1</span>AKL4<br><br><span class="hljs-attribute">VCSA</span> <span class="hljs-number">8</span> <span class="hljs-number">0</span>F41K-<span class="hljs-number">0</span>MJ4H-M88U1-<span class="hljs-number">0</span>C3N0-<span class="hljs-number">0</span>A214<br><br> <br><br><span class="hljs-attribute">ESXi</span> <span class="hljs-number">8</span> HG00K-<span class="hljs-number">03</span>H8K-<span class="hljs-number">48929</span>-<span class="hljs-number">8</span>K1NP-<span class="hljs-number">3</span>LUJ4<br><br><span class="hljs-attribute">VCSA</span> <span class="hljs-number">8</span> <span class="hljs-number">4</span>F282-<span class="hljs-number">0</span>MLD2-M8869-T89G0-CF240<br> <br><br><span class="hljs-attribute">vSAN</span> <span class="hljs-number">8</span> NF212-<span class="hljs-number">08</span>H0K-<span class="hljs-number">488</span>X8-WV9X6-<span class="hljs-number">1</span>F024<br><br><span class="hljs-attribute">vSAN</span> <span class="hljs-number">8</span> witness JF61H-<span class="hljs-number">48</span>K8K-<span class="hljs-number">488</span>X9-W98Z0-<span class="hljs-number">1</span>FH24<br><br> <br><br><span class="hljs-attribute">Horizon</span> Enterprise v8.x <span class="hljs-number">0</span>G4DA-<span class="hljs-number">49</span>J81-M80R1-<span class="hljs-number">012</span>N4-<span class="hljs-number">86</span>KH4<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 虚拟化 </category>
          
          <category> Esxi </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Esxi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitLab-CE和Runner安装</title>
      <link href="/gitlab-ce%E5%92%8Crunner%E5%AE%89%E8%A3%85/"/>
      <url>/gitlab-ce%E5%92%8Crunner%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="GitLab-CE和Gitlab-Runner安装"><a href="#GitLab-CE和Gitlab-Runner安装" class="headerlink" title="GitLab-CE和Gitlab-Runner安装"></a>GitLab-CE和Gitlab-Runner安装</h2><h2 id="1-GitLab-CE安装"><a href="#1-GitLab-CE安装" class="headerlink" title="1.GitLab-CE安装"></a>1.GitLab-CE安装</h2><h3 id="1-GitLab-CE"><a href="#1-GitLab-CE" class="headerlink" title="1.GitLab-CE"></a>1.GitLab-CE</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -d \<br>--name Gitlab-CE \<br>-p <span class="hljs-number">22</span>:<span class="hljs-number">22</span> \<br>-p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> \<br>-p <span class="hljs-number">443</span>:<span class="hljs-number">443</span> \<br>-v <span class="hljs-regexp">/appdata/</span>docker<span class="hljs-regexp">/Gitlab/</span>Gitlab-CE<span class="hljs-regexp">/config:/</span>etc/gitlab \<br>-v <span class="hljs-regexp">/appdata/</span>docker<span class="hljs-regexp">/Gitlab/</span>Gitlab-CE<span class="hljs-regexp">/logs:/</span>var<span class="hljs-regexp">/log/gi</span>tlab \<br>-v <span class="hljs-regexp">/appdata/</span>docker<span class="hljs-regexp">/Gitlab/</span>Gitlab-CE<span class="hljs-regexp">/data:/</span>var<span class="hljs-regexp">/opt/gi</span>tlab \<br>--restart always \<br>gitlab/gitlab-ce:latest<br></code></pre></td></tr></table></figure><h3 id="2-root密码查看"><a href="#2-root密码查看" class="headerlink" title="2.root密码查看"></a>2.root密码查看</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">docker exec -it Gitlab-CE <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;Password:&#x27;</span> <span class="hljs-regexp">/etc/gi</span>tlab/initial_root_password<br></code></pre></td></tr></table></figure><h2 id="2-Gitlab-Runner安装"><a href="#2-Gitlab-Runner安装" class="headerlink" title="2.Gitlab-Runner安装"></a>2.Gitlab-Runner安装</h2><h3 id="1-安装Runner"><a href="#1-安装Runner" class="headerlink" title="1.安装Runner"></a>1.安装Runner</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -d \<br>--name Gitlab-Runner \<br>-v <span class="hljs-regexp">/appdata/</span>docker<span class="hljs-regexp">/Gitlab/</span>Gitlab-Runner<span class="hljs-regexp">/config:/</span>etc/gitlab-runner \<br>-v <span class="hljs-regexp">/var/</span>run<span class="hljs-regexp">/docker.sock:/</span>var<span class="hljs-regexp">/run/</span>docker.sock \<br>--restart always \<br>gitlab/gitlab-runner:latest<br></code></pre></td></tr></table></figure><h3 id="2-注册Runner"><a href="#2-注册Runner" class="headerlink" title="2.注册Runner"></a>2.注册Runner</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker run <span class="hljs-params">--rm</span> \<br>-v <span class="hljs-string">/mnt/user/appdata/Gitlab/Gitlab-Runner/config</span>:<span class="hljs-string">/etc/gitlab-runner</span> gitlab/gitlab-runner register \<br><span class="hljs-params">--non-interactive</span> \<br><span class="hljs-params">--executor</span> <span class="hljs-string">&quot;docker&quot;</span> \<br><span class="hljs-params">--docker-image</span> alpine<span class="hljs-function">:latest</span> \<br><span class="hljs-params">--url</span> <span class="hljs-string">&quot;http://IP/&quot;</span> \<br><span class="hljs-params">--registration-token</span> <span class="hljs-string">&quot;Token&quot;</span> \<br><span class="hljs-params">--description</span> <span class="hljs-string">&quot;first-register-runner&quot;</span> \<br><span class="hljs-params">--tag-list</span> <span class="hljs-string">&quot;MicroServer,Home&quot;</span> \<br><span class="hljs-params">--run-untagged=</span><span class="hljs-string">&quot;true&quot;</span> \<br><span class="hljs-params">--locked=</span><span class="hljs-string">&quot;false&quot;</span> \<br><span class="hljs-params">--access-level=</span><span class="hljs-string">&quot;not_protected&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> 文档 </category>
          
          <category> Gitlb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitLab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Harbor密码重置</title>
      <link href="/harbor%E5%AF%86%E7%A0%81%E9%87%8D%E7%BD%AE/"/>
      <url>/harbor%E5%AF%86%E7%A0%81%E9%87%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="Harbor忘记密码，密码重置、密码修改-、admin密码重置"><a href="#Harbor忘记密码，密码重置、密码修改-、admin密码重置" class="headerlink" title="Harbor忘记密码，密码重置、密码修改 、admin密码重置"></a>Harbor忘记密码，密码重置、密码修改 、admin密码重置</h1><h5 id="1-进入harbor-db的容器"><a href="#1-进入harbor-db的容器" class="headerlink" title="1.进入harbor-db的容器"></a>1.进入<code>harbor-db</code>的容器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> -it e5be8 /bin/bash<br></code></pre></td></tr></table></figure><h5 id="2-进入postgresql命令行"><a href="#2-进入postgresql命令行" class="headerlink" title="2.进入postgresql命令行"></a>2.进入postgresql命令行</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">psql -h postgresql -d postgres -U postgres <br></code></pre></td></tr></table></figure><p>默认密码root123</p><h5 id="3-切换到harbor所在的数据库"><a href="#3-切换到harbor所在的数据库" class="headerlink" title="3.切换到harbor所在的数据库"></a>3.切换到harbor所在的数据库</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift">\c registry<br></code></pre></td></tr></table></figure><h5 id="4-查看harbor-user表"><a href="#4-查看harbor-user表" class="headerlink" title="4.查看harbor_user表"></a>4.查看harbor_user表</h5><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> harbor_user;<br></code></pre></td></tr></table></figure><h5 id="5-重置密码"><a href="#5-重置密码" class="headerlink" title="5.重置密码"></a>5.重置密码</h5><p>修改admin的密码，修改为初始化密码Harbor12345 ，修改好了之后登录web ui上再修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">update harbor_user <span class="hljs-built_in">set</span> salt=<span class="hljs-string">&#x27;&#x27;</span>, password=<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-built_in">where</span> username=<span class="hljs-string">&#x27;admin&#x27;</span>;<br></code></pre></td></tr></table></figure><h5 id="6-退出-q-退出postgresql，exit退出容器。"><a href="#6-退出-q-退出postgresql，exit退出容器。" class="headerlink" title="6.退出 \q 退出postgresql，exit退出容器。"></a>6.退出 \q 退出postgresql，exit退出容器。</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">\q<br><span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Harbor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Harbor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSH密钥创建</title>
      <link href="/ssh%E5%AF%86%E9%92%A5%E5%88%9B%E5%BB%BA/"/>
      <url>/ssh%E5%AF%86%E9%92%A5%E5%88%9B%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h3 id="1-创建密钥"><a href="#1-创建密钥" class="headerlink" title="1.创建密钥"></a>1.创建密钥</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh-keygen -t rsa -b 4096<br><span class="hljs-meta prompt_">#</span><span class="language-bash">执行创建命令，-b参数为指定密钥长度</span><br>Generating public/private rsa key pair.<br>Enter file in which to save the key (/home/pi/.ssh/id_rsa): <br>Enter passphrase (empty for no passphrase): <br><span class="hljs-meta prompt_">#</span><span class="language-bash">设置密钥密码，可以直接回车跳过</span><br>Enter same passphrase again: <br><span class="hljs-meta prompt_">#</span><span class="language-bash">确认密码，可以直接回车跳过</span><br>Your identification has been saved in /home/pi/.ssh/id_rsa.<br><span class="hljs-meta prompt_">#</span><span class="language-bash">公钥</span><br>Your public key has been saved in /home/pi/.ssh/id_rsa.pub.<br><span class="hljs-meta prompt_">#</span><span class="language-bash">私钥</span><br>The key fingerprint is:<br>SHA256:B25KhIK5xNfR3j7SBi52+e2Z+t0K7Ouhg3IzRqxyuEE pi@Debian<br>The key&#x27;s randomart image is:<br>+---[RSA 4096]----+<br>|     ..          |<br>|.o  ....         |<br>|oo....o o        |<br>|.... . + o       |<br>|.  E  + S .      |<br>|  .  + X *.      |<br>|   .o * = o+     |<br>|   o.+ * oo.* .  |<br>|   .+ + oo*O.o.. |<br>+----[SHA256]-----+<br></code></pre></td></tr></table></figure><h3 id="2-检查-ssh下authorized-keys文件"><a href="#2-检查-ssh下authorized-keys文件" class="headerlink" title="2.检查.ssh下authorized_keys文件"></a>2.检查.ssh下<code>authorized_keys</code>文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">root@Debian:~# cd .ssh/<br>root@Debian:~# ls .ssh/<br>id_rsa  id_rsa.pub<br>root@Debian:~/.ssh# cat id_rsa.pub &gt;&gt; authorized_keys<br></code></pre></td></tr></table></figure><h3 id="3-修改权限"><a href="#3-修改权限" class="headerlink" title="3.修改权限"></a>3.修改权限</h3><h4 id="修改-ssh的权限为700"><a href="#修改-ssh的权限为700" class="headerlink" title="修改.ssh的权限为700,"></a>修改<code>.ssh的权限为700</code>,</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">root@Debian:~# cd<br>root@Debian:~# chmod 700 .ssh<br>root@Debian:~# cd .ssh/<br></code></pre></td></tr></table></figure><h4 id="authorized-keys的权限为600或者更严格的400"><a href="#authorized-keys的权限为600或者更严格的400" class="headerlink" title="authorized_keys的权限为600或者更严格的400"></a><code>authorized_keys</code>的权限为600或者更严格的400</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">root@Debian:~# cd<br>root@Debian:~# chmod 600 .ssh/authorized_keys<br></code></pre></td></tr></table></figure><h3 id="4-修改ssh的配置"><a href="#4-修改ssh的配置" class="headerlink" title="4.修改ssh的配置"></a>4.修改ssh的配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vi /etc/ssh/sshd_config<br></code></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># 允许root登录，但是禁止root密码登录</span><br><span class="hljs-attribute">PermitRootLogin</span> prohibit-password<br> <br><span class="hljs-comment"># 通过RSA认证</span><br>RSAAuthentication <span class="hljs-literal">yes</span><br> <br><span class="hljs-comment"># 允许pubKey（id_rsa.pub）登录</span><br>PubkeyAuthentication <span class="hljs-literal">yes</span><br><br><span class="hljs-comment">#使用密码  no为不使用密码</span><br>PasswordAuthentication <span class="hljs-literal">yes</span>                        <br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> 手册 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 密钥,SSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux换源</title>
      <link href="/linux%E6%8D%A2%E6%BA%90/"/>
      <url>/linux%E6%8D%A2%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<h3 id="1-Debian"><a href="#1-Debian" class="headerlink" title="1.Debian"></a>1.Debian</h3><h4 id="1-Debian-10（buster）"><a href="#1-Debian-10（buster）" class="headerlink" title="1.Debian 10（buster）"></a>1.Debian 10（buster）</h4><h5 id="1-阿里云"><a href="#1-阿里云" class="headerlink" title="1.阿里云"></a>1.阿里云</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> buster main non-free contrib<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> buster main non-free contrib<br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian-security buster/u</span>pdates main<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian-security buster/u</span>pdates main<br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> buster-updates main non-free contrib<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> buster-updates main non-free contrib<br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> buster-backports main non-free contrib<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> buster-backports main non-free contrib<br></code></pre></td></tr></table></figure><h5 id="2-清华源"><a href="#2-清华源" class="headerlink" title="2.清华源"></a>2.清华源</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/debian/</span> buster main contrib non-free<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster main contrib non-free</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/debian/</span> buster-updates main contrib non-free<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-updates main contrib non-free</span><br><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/debian/</span> buster-backports main contrib non-free<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ buster-backports main contrib non-free</span><br><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/debian-security buster/u</span>pdates main contrib non-free<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security buster/updates main contrib non-free</span><br></code></pre></td></tr></table></figure><h4 id="2-Debian-11（bullseye）"><a href="#2-Debian-11（bullseye）" class="headerlink" title="2.Debian 11（bullseye）"></a>2.Debian 11（bullseye）</h4><h5 id="1-清华源"><a href="#1-清华源" class="headerlink" title="1.清华源"></a>1.清华源</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/debian/</span> bullseye main contrib non-free<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/debian/</span> bullseye-updates main contrib non-free<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/debian/</span> bullseye-backports main contrib non-free<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free</span><br></code></pre></td></tr></table></figure><h5 id="2-中科大"><a href="#2-中科大" class="headerlink" title="2.中科大"></a>2.中科大</h5><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs 1c">deb http:<span class="hljs-comment">//mirrors.ustc.edu.cn/debian stable main contrib non-free</span><br><span class="hljs-meta"># deb-src http:<span class="hljs-comment">//mirrors.ustc.edu.cn/debian stable main contrib non-free</span></span><br>deb http:<span class="hljs-comment">//mirrors.ustc.edu.cn/debian stable-updates main contrib non-free</span><br><span class="hljs-meta"># deb-src http:<span class="hljs-comment">//mirrors.ustc.edu.cn/debian stable-updates main contrib non-free</span></span><br><br><span class="hljs-meta"># deb http:<span class="hljs-comment">//mirrors.ustc.edu.cn/debian stable-proposed-updates main contrib non-free</span></span><br><span class="hljs-meta"># deb-src http:<span class="hljs-comment">//mirrors.ustc.edu.cn/debian stable-proposed-updates main contrib non-free</span></span><br></code></pre></td></tr></table></figure><h5 id="3-阿里云"><a href="#3-阿里云" class="headerlink" title="3.阿里云"></a>3.阿里云</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> bullseye main non-free contrib<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> bullseye main non-free contrib<br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian-security/</span> bullseye-security main<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian-security/</span> bullseye-security main<br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> bullseye-updates main non-free contrib<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> bullseye-updates main non-free contrib<br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> bullseye-backports main non-free contrib<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/debian/</span> bullseye-backports main non-free contrib<br></code></pre></td></tr></table></figure><h5 id="4-Debian内网"><a href="#4-Debian内网" class="headerlink" title="4.Debian内网"></a>4.Debian内网</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br>deb http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/debian/</span> bullseye main contrib non-free<br><span class="hljs-comment"># deb-src http://mirrors.tnxw.com/debian/ bullseye main contrib non-free</span><br>deb http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/debian/</span> bullseye-updates main contrib non-free<br><span class="hljs-comment"># deb-src http://mirrors.tnxw.com/debian/ bullseye-updates main contrib non-free</span><br><br>deb http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/debian/</span> bullseye-backports main contrib non-free<br><span class="hljs-comment"># deb-src http://mirrors.tnxw.com/debian/ bullseye-backports main contrib non-free</span><br><br><span class="hljs-comment">#deb http://mirrors.tnxw.com/debian-security bullseye-security main contrib non-free</span><br><span class="hljs-comment"># deb-src http://mirrors.tnxw.com/debian-security bullseye-security main contrib non-free</span><br></code></pre></td></tr></table></figure><h3 id="2-Ubuntu"><a href="#2-Ubuntu" class="headerlink" title="2.Ubuntu"></a>2.Ubuntu</h3><h4 id="1-Ubuntu-20-04-focal"><a href="#1-Ubuntu-20-04-focal" class="headerlink" title="1.Ubuntu 20.04(focal)"></a>1.Ubuntu 20.04(focal)</h4><h5 id="1-清华源-1"><a href="#1-清华源-1" class="headerlink" title="1.清华源"></a>1.清华源</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/ubuntu/</span> focal main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/ubuntu/</span> focal-updates main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/ubuntu/</span> focal-backports main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/ubuntu/</span> focal-security main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br><br><span class="hljs-comment"># 预发布软件源，不建议启用</span><br><span class="hljs-comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span><br></code></pre></td></tr></table></figure><h5 id="2-阿里云"><a href="#2-阿里云" class="headerlink" title="2.阿里云"></a>2.阿里云</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal main restricted universe multiverse<br><br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal-security main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal-security main restricted universe multiverse<br><br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal-updates main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal-updates main restricted universe multiverse<br><br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal-proposed main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal-proposed main restricted universe multiverse<br><br>deb http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal-backports main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ubuntu/</span> focal-backports main restricted universe multiverse<br></code></pre></td></tr></table></figure><h5 id="3-中科大"><a href="#3-中科大" class="headerlink" title="3.中科大"></a>3.中科大</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 默认注释了源码仓库，如有需要可自行取消注释</span><br>deb https:<span class="hljs-regexp">//mi</span>rrors.ustc.edu.cn<span class="hljs-regexp">/ubuntu/</span> focal main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br><br>deb https:<span class="hljs-regexp">//mi</span>rrors.ustc.edu.cn<span class="hljs-regexp">/ubuntu/</span> focal-security main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br><br>deb https:<span class="hljs-regexp">//mi</span>rrors.ustc.edu.cn<span class="hljs-regexp">/ubuntu/</span> focal-updates main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br><br>deb https:<span class="hljs-regexp">//mi</span>rrors.ustc.edu.cn<span class="hljs-regexp">/ubuntu/</span> focal-backports main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><br><span class="hljs-comment"># 预发布软件源，不建议启用</span><br><span class="hljs-comment"># deb https://mirrors.ustc.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="hljs-comment"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span><br></code></pre></td></tr></table></figure><h5 id="4-Ubuntu内网"><a href="#4-Ubuntu内网" class="headerlink" title="4.Ubuntu内网"></a>4.Ubuntu内网</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">deb http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/ubuntu/</span> focal main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/ubuntu/</span> focal main restricted universe multiverse<br>deb http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/ubuntu/</span> focal-updates main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/ubuntu/</span> focal-updates main restricted universe multiverse<br>deb http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/ubuntu/</span> focal-backports main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/ubuntu/</span> focal-backports main restricted universe multiverse<br>deb http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/ubuntu/</span> focal-security main restricted universe multiverse<br>deb-src http:<span class="hljs-regexp">//mi</span>rrors.tnxw.com<span class="hljs-regexp">/ubuntu/</span> focal-security main restricted universe multiverse<br><span class="hljs-comment"># 预发布软件源，不建议启用</span><br><span class="hljs-comment"># deb http://mirrors.tnxw.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="hljs-comment"># deb-src http://mirrors.tnxw.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> 手册 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Apt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux设置静态IP</title>
      <link href="/linux%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81ip/"/>
      <url>/linux%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81ip/</url>
      
        <content type="html"><![CDATA[<h5 id="ArchLinux"><a href="#ArchLinux" class="headerlink" title="ArchLinux"></a><strong>ArchLinux</strong></h5><p>​1.编辑配置文件</p><p>​网卡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">/etc/dhcpcd.<span class="hljs-property">conf</span><br></code></pre></td></tr></table></figure><p>​2.添加下列内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">interface eth0#设置网卡名<br><span class="hljs-keyword">static</span> ip_address=<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.10</span>/<span class="hljs-number">24</span>#设置<span class="hljs-variable constant_">IP</span>和掩码位<br><span class="hljs-keyword">static</span> routers=<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>#设置网关<br><span class="hljs-keyword">static</span> domain_name_servers=<span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>#设置<span class="hljs-variable constant_">DNS</span><br></code></pre></td></tr></table></figure><p>​3.常用命令</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">systemctl status systemd-networkd#查看网络状态<br>systemctl restart dhcpcd#重启<span class="hljs-variable constant_">DHCP</span><br></code></pre></td></tr></table></figure><hr><h5 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a><strong>CentOS</strong></h5><p>​1.编辑配置文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">/etc/sysconfig/network-scripts<br></code></pre></td></tr></table></figure><p>​2.清空内容并添加以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable constant_">TYPE</span>=<span class="hljs-string">&quot;Ethernet&quot;</span><br><span class="hljs-variable constant_">PROXY_METHOD</span>=<span class="hljs-string">&quot;none&quot;</span><br><span class="hljs-variable constant_">BROWSER_ONLY</span>=<span class="hljs-string">&quot;no&quot;</span><br><span class="hljs-variable constant_">BOOTPROTO</span>=<span class="hljs-string">&quot;none&quot;</span><br><span class="hljs-variable constant_">DEFROUTE</span>=<span class="hljs-string">&quot;yes&quot;</span><br><span class="hljs-title class_">IPV4</span>_FAILURE_FATAL=<span class="hljs-string">&quot;no&quot;</span><br><span class="hljs-title class_">IPV6INIT</span>=<span class="hljs-string">&quot;yes&quot;</span><br><span class="hljs-title class_">IPV6</span>_AUTOCONF=<span class="hljs-string">&quot;yes&quot;</span><br><span class="hljs-title class_">IPV6</span>_DEFROUTE=<span class="hljs-string">&quot;yes&quot;</span><br><span class="hljs-title class_">IPV6</span>_FAILURE_FATAL=<span class="hljs-string">&quot;no&quot;</span><br><span class="hljs-title class_">IPV6</span>_ADDR_GEN_MODE=<span class="hljs-string">&quot;stable-privacy&quot;</span><br><span class="hljs-variable constant_">NAME</span>=<span class="hljs-string">&quot;eth0&quot;</span>#网卡名称<br><span class="hljs-variable constant_">UUID</span>=<span class="hljs-string">&quot;5ee00e18-1161-4c0b-b874-1931dbd7ea33&quot;</span>#<span class="hljs-variable constant_">ID</span><br><span class="hljs-variable constant_">DEVICE</span>=<span class="hljs-string">&quot;eth0&quot;</span><br><span class="hljs-variable constant_">ONBOOT</span>=<span class="hljs-string">&quot;yes&quot;</span><br><span class="hljs-variable constant_">IPADDR</span>=<span class="hljs-string">&quot;10.0.0.132&quot;</span>#静态<span class="hljs-variable constant_">IP</span>地址<br><span class="hljs-variable constant_">PREFIX</span>=<span class="hljs-string">&quot;28&quot;</span>#掩码位<br><span class="hljs-variable constant_">GATEWAY</span>=<span class="hljs-string">&quot;10.0.0.128&quot;</span>#子网掩码<br><span class="hljs-title class_">DNS1</span>=<span class="hljs-string">&quot;10.0.0.128&quot;</span>#<span class="hljs-variable constant_">DNS</span><br><br></code></pre></td></tr></table></figure><hr><h5 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a><strong>Debian</strong></h5><p>​1.编辑配置文件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">/etc/network/interfaces<br></code></pre></td></tr></table></figure><p>​2.清空内容并添加以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs javascript">auto eth0#设置网卡名<br><br>iface eth0 inet <span class="hljs-keyword">static</span> <br>address <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.9</span>#设置<span class="hljs-variable constant_">IP</span>和掩码位<br>netmask <span class="hljs-number">255.255</span><span class="hljs-number">.255</span><span class="hljs-number">.0</span> #设置子网掩码<br>gateway <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>#设置网关<br><br><br>auto eth0 eth1<br><br>iface eth0 inet <span class="hljs-keyword">static</span>                 <br>address <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.10</span><br>netmask <span class="hljs-number">255.255</span><span class="hljs-number">.255</span><span class="hljs-number">.0</span><br>gateway <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br>dns-nameservers <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br><br>iface eth1 inet <span class="hljs-keyword">static</span>                 <br>address <span class="hljs-number">10.0</span><span class="hljs-number">.1</span><span class="hljs-number">.10</span><br>netmask <span class="hljs-number">255.255</span><span class="hljs-number">.255</span><span class="hljs-number">.0</span><br>gateway <span class="hljs-number">10.0</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><br><br></code></pre></td></tr></table></figure><h5 id="armbian"><a href="#armbian" class="headerlink" title="armbian"></a><strong>armbian</strong></h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">source</span> /etc/network/interfaces.d/*<br><br><span class="hljs-comment"># Network is managed by Network manager</span><br><span class="hljs-comment"># You can choose one of the following two IP setting methods:</span><br><span class="hljs-comment"># Use # to disable another setting method</span><br><br><br><span class="hljs-comment"># 01. Enable dynamic DHCP to assign IP</span><br><span class="hljs-comment">#auto eth0</span><br><span class="hljs-comment">#iface eth0 inet dhcp</span><br>        <span class="hljs-attribute">hwaddress</span> ether mac<br><br><br><span class="hljs-comment"># 02. Enable static IP settings(IP is modified according to the actual)</span><br><span class="hljs-attribute">auto</span> eth0<br><span class="hljs-attribute">allow</span>-hotplug eth0<br><span class="hljs-attribute">iface</span> eth0 inet static<br><span class="hljs-attribute">address</span> <span class="hljs-number">10.0.0.1</span><br><span class="hljs-attribute">netmask</span> <span class="hljs-number">255.255.255.0</span><br><span class="hljs-attribute">gateway</span> <span class="hljs-number">10.0.0.1</span><br><span class="hljs-attribute">dns</span>-nameservers <span class="hljs-number">119.29.29.29</span><br><span class="hljs-attribute">dns</span>-nameservers <span class="hljs-number">10.0.0.1</span><br><br><br><span class="hljs-comment"># 03. Docker install OpenWrt and communicate with each other</span><br><span class="hljs-comment">#allow-hotplug eth0</span><br><span class="hljs-comment">#no-auto-down eth0</span><br><span class="hljs-comment">#auto eth0</span><br><span class="hljs-comment">#iface eth0 inet manual</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#auto macvlan</span><br><span class="hljs-comment">#iface macvlan inet dhcp</span><br><span class="hljs-comment">#        hwaddress ether mac</span><br><span class="hljs-comment">#        pre-up ip link add macvlan link eth0 type macvlan mode bridge</span><br><span class="hljs-comment">#        post-down ip link del macvlan link eth0 type macvlan mode bridge</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#auto lo</span><br><span class="hljs-comment">#iface lo inet loopback</span><br><br></code></pre></td></tr></table></figure><hr><h5 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a><strong>Ubuntu</strong></h5><p>​1.编辑配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javas">/etc/netplan/********.yaml#*填写对应的名称<br></code></pre></td></tr></table></figure><p>​2.修改内容为如下,本设置为双网卡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javas">network:<br>    ethernets:<br>        eth0:#网卡名称<br>            dhcp4: false<br>            addresses: [10.0.0.11/24]#IP和掩码位<br>            routes:<br>                   - to: 0.0.0.0/0<br>                     via: 10.0.0.1<br>                     metric: 30#优先级<br>            optional: true<br>            nameservers:<br>　　　　    addresses: [10.0.0.1,119.29.29.29]#DNS<br><br>        eth1:<br>            dhcp4: false<br>            addresses: [10.0.0.131/28]<br>            routes:<br>                    - to: 0.0.0.0/0<br>                      via: 10.0.0.128<br>                      metric: 20<br>            optional: true<br>            nameservers:<br>　　　　    addresses: [10.0.0.128]<br>    version: 2<br></code></pre></td></tr></table></figure><p>​3.重启网卡并</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javas">netplan apply<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> 手册 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NextCloud反向代理</title>
      <link href="/nextcloud%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"/>
      <url>/nextcloud%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs zephir">&lt;?php<br>$CONFIG = <span class="hljs-keyword">array</span> (<br>  <span class="hljs-string">&#x27;memcache.local&#x27;</span> =&gt; <span class="hljs-string">&#x27;\\OC\\Memcache\\APCu&#x27;</span>,<br>  <span class="hljs-string">&#x27;memcache.locking&#x27;</span> =&gt; <span class="hljs-string">&#x27;\\OC\\Memcache\\Redis&#x27;</span>,<br>  <span class="hljs-string">&#x27;redis&#x27;</span> =&gt;<br>  <span class="hljs-keyword">array</span> (<br>    <span class="hljs-string">&#x27;host&#x27;</span> =&gt; <span class="hljs-string">&#x27;Redis地址&#x27;</span>,<br>    <span class="hljs-string">&#x27;port&#x27;</span> =&gt; Redis端口,<br>  ),<br>  <span class="hljs-string">&#x27;datadirectory&#x27;</span> =&gt; <span class="hljs-string">&#x27;/data&#x27;</span>,<br>  <span class="hljs-string">&#x27;instanceid&#x27;</span> =&gt; <span class="hljs-string">&#x27;c1r4ss&#x27;</span>,<br>  <span class="hljs-string">&#x27;passwordsalt&#x27;</span> =&gt; <span class="hljs-string">&#x27;Y465JyqS3RiDl&#x27;</span>,<br>  <span class="hljs-string">&#x27;secret&#x27;</span> =&gt; <span class="hljs-string">&#x27;6AaD8x0dyNTwX03RsGpVZMjkEau&#x27;</span>,<br>  <span class="hljs-string">&#x27;trusted_domains&#x27;</span> =&gt;<br>  <span class="hljs-keyword">array</span> (<br>    <span class="hljs-number">0</span> =&gt; <span class="hljs-string">&#x27;本机IP&#x27;</span>,<br>        <span class="hljs-number">1</span> =&gt; <span class="hljs-string">&#x27;信任域名1&#x27;</span>,<br>        <span class="hljs-number">2</span> =&gt; <span class="hljs-string">&#x27;信任域名2&#x27;</span>,<br>  ),<br>  <span class="hljs-string">&#x27;dbtype&#x27;</span> =&gt; <span class="hljs-string">&#x27;mysql&#x27;</span>,<br>  <span class="hljs-string">&#x27;version&#x27;</span> =&gt; <span class="hljs-string">&#x27;22.2.3.0&#x27;</span>,<br>  <span class="hljs-string">&#x27;overwrite.cli.url&#x27;</span> =&gt; <span class="hljs-string">&#x27;https://域名&#x27;</span>,<br>  <span class="hljs-string">&#x27;dbname&#x27;</span> =&gt; <span class="hljs-string">&#x27;数据库名&#x27;</span>,<br>  <span class="hljs-string">&#x27;dbhost&#x27;</span> =&gt; <span class="hljs-string">&#x27;数据库地址:3306&#x27;</span>,<br>  <span class="hljs-string">&#x27;dbport&#x27;</span> =&gt; <span class="hljs-string">&#x27;&#x27;</span>,<br>  <span class="hljs-string">&#x27;dbtableprefix&#x27;</span> =&gt; <span class="hljs-string">&#x27;oc_&#x27;</span>,<br>  <span class="hljs-string">&#x27;mysql.utf8mb4&#x27;</span> =&gt; <span class="hljs-keyword">true</span>,<br>  <span class="hljs-string">&#x27;dbuser&#x27;</span> =&gt; <span class="hljs-string">&#x27;数据库用户&#x27;</span>,<br>  <span class="hljs-string">&#x27;dbpassword&#x27;</span> =&gt; <span class="hljs-string">&#x27;数据库密码&#x27;</span>,<br>  <span class="hljs-string">&#x27;installed&#x27;</span> =&gt; <span class="hljs-keyword">true</span>,<br>#  <span class="hljs-string">&#x27;auth.bruteforce.protection.enabled&#x27;</span> =&gt; <span class="hljs-keyword">false</span>,<br>  <span class="hljs-string">&#x27;overwritehost&#x27;</span> =&gt; <span class="hljs-string">&#x27;代理域名或域名加端口&#x27;</span>,<br>  <span class="hljs-string">&#x27;overwriteprotocol&#x27;</span> =&gt; <span class="hljs-string">&#x27;https&#x27;</span>,<br>  <span class="hljs-string">&#x27;app_install_overwrite&#x27;</span> =&gt;<br>  <span class="hljs-keyword">array</span> (<br>    <span class="hljs-number">0</span> =&gt; <span class="hljs-string">&#x27;hancomoffice&#x27;</span>,<br>  ),<br>);<br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> 文档 </category>
          
          <category> NextCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NextCloud </tag>
            
            <tag> 反向代理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>删除此电脑中的软件图标</title>
      <link href="/%E5%88%A0%E9%99%A4%E6%AD%A4%E7%94%B5%E8%84%91%E4%B8%AD%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%9B%BE%E6%A0%87/"/>
      <url>/%E5%88%A0%E9%99%A4%E6%AD%A4%E7%94%B5%E8%84%91%E4%B8%AD%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%9B%BE%E6%A0%87/</url>
      
        <content type="html"><![CDATA[<p>删除<code>此电脑</code>中的软件图标</p><p>1.按下<code>win+r</code>打开运行，输入<code>regedit</code>,依次打开如下路径。</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs moonscript">\HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Desktop<br></code></pre></td></tr></table></figure><p>2.找到文件夹<code>Desktop</code>点击下拉再点击<code>NameSpace</code>右击下面软件对应文件夹，右键点击“删除”。</p><p>3.继续找到<code>MyComputer</code>点击下拉再点击<code>NameSpace</code>右击下面软件对应文件夹，右键点击“删除”。</p>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
          <category> 文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chevereto安装</title>
      <link href="/chevereto%E5%AE%89%E8%A3%85/"/>
      <url>/chevereto%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="Chevereto安装"><a href="#Chevereto安装" class="headerlink" title="Chevereto安装"></a>Chevereto安装</h1><p><strong>环境要求：Apache&#x2F;Nginx、PHP 5.5+、MySQL 5.0+</strong></p><h3 id="1、搭建web环境"><a href="#1、搭建web环境" class="headerlink" title="1、搭建web环境"></a>1、搭建web环境</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">我们可以用lnmp、lamp一键包或者宝塔之类的面板来搭建web环境。<br>lnmp安装方法可参考：https:<span class="hljs-regexp">//</span>www.tracymc.cn<span class="hljs-regexp">/archives/</span><span class="hljs-number">649</span>。<br>宝塔安装方法可看：https:<span class="hljs-regexp">//</span>www.tracymc.cn<span class="hljs-regexp">/archives/</span><span class="hljs-number">858</span>。<br></code></pre></td></tr></table></figure><h3 id="2、上传chevereto程序"><a href="#2、上传chevereto程序" class="headerlink" title="2、上传chevereto程序"></a>2、上传chevereto程序</h3><p>搭建好<code>web</code>环境后，添加网站并解析，再上传<code>chevereto</code>程序到网站目录，chevereto下载地址：<code>https://github.com/Chevereto/Chevereto-Free</code>。<br>这里以<code>lnmp</code>为例，执行命令：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/home/</span>wwwroot/www.yourdomain.com<br>wget https:<span class="hljs-regexp">//</span>www.moerats.com<span class="hljs-regexp">/usr/</span>down/Chevereto_v1.<span class="hljs-number">0.8</span>.tar.gz<br>tar zfvx Chevereto_v1.<span class="hljs-number">0.8</span>.tar.gz<br>chmod -R <span class="hljs-number">775</span> ./*<br></code></pre></td></tr></table></figure><p>修改网站配置文件<code>/usr/local/nginx/conf/vhost/xx.com.conf</code>，在server中添加以下代码。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">location / &#123;<br>try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span><span class="hljs-regexp">/ /i</span>ndex.php?<span class="hljs-variable">$query_string</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>然后重启<code>Nginx</code>，使用命令：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/i</span>nit.d/nginx restart<br><span class="hljs-comment">#或者</span><br>lnmp restart<br></code></pre></td></tr></table></figure><p>最后就可以打开你的网站按要求填入数据库信息进行安装了。</p><p><strong>注意：经测试，使用v1.0.7程序的打开网站后可能会出现Chevereto can’t create the app&#x2F;settings.php file. You must manually create this file该错误，这时在app目录新建settings.php文件并给予可写入权限即可，也可使用命令，以lnmp为例：</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/home/</span>wwwroot<span class="hljs-regexp">/xx.com/</span>app<br>touch settings.php<br>chmod -R <span class="hljs-number">777</span> settings.php<br></code></pre></td></tr></table></figure><p>当然本教程使用的是最新版v1.0.8暂时没遇到过该问题。</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> 文档 </category>
          
          <category> Chevereto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chevereto </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typecho配置Rewrite规则</title>
      <link href="/typecho%E9%85%8D%E7%BD%AErewrite%E8%A7%84%E5%88%99/"/>
      <url>/typecho%E9%85%8D%E7%BD%AErewrite%E8%A7%84%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h2 id="Nginx服务器配置rewrite规则实现静态化"><a href="#Nginx服务器配置rewrite规则实现静态化" class="headerlink" title="Nginx服务器配置rewrite规则实现静态化"></a><strong>Nginx服务器配置rewrite规则实现静态化</strong></h2><p>首先在你的Nginx服务器上配置了 <code>yourdomain.conf</code> 文件，注意不是 <code>nginx.conf</code> 文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">yourdomain.conf` 文件存储路径一般为 `<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/nginx/</span>conf<span class="hljs-regexp">/vhost/y</span>ourdomain.conf<br></code></pre></td></tr></table></figure><p>在 <code>yourdomain.conf</code> 配置文件中找到 <code>server</code> 配置段，在其中加入下面一段代码</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">if</span> (!-e <span class="hljs-variable">$request_filename</span>)<br>&#123;<br><span class="hljs-attribute">rewrite</span><span class="hljs-regexp"> ^(.*)$</span> /index.php<span class="hljs-variable">$1</span> <span class="hljs-literal">last</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>copy</p><p>而其他不需要修改，保存重启服务器。</p><p>例如我的配置文件为 <code>www.conimi.com.conf</code> ,配置完成如下，</p><p><img src="https://raw.githubusercontent.com/DisruptiveEra/image/main/Hexo/63b94dbd575cf.png" alt="typecho伪静态-yourdomain.conf"></p><h2 id="后台配置Typecho实现静态化"><a href="#后台配置Typecho实现静态化" class="headerlink" title="#后台配置Typecho实现静态化"></a><a href="https://conimi.com/archives/15/#%E5%90%8E%E5%8F%B0%E9%85%8D%E7%BD%AEtypecho%E5%AE%9E%E7%8E%B0%E9%9D%99%E6%80%81%E5%8C%96">#</a><strong>后台配置Typecho实现静态化</strong></h2><p>第一步完成后，登录博客后台，进入 设置→永久链接</p><p><img src="https://raw.githubusercontent.com/DisruptiveEra/image/main/Hexo/63b94dc3a3835.png" alt="typecho伪静态-后台"></p><p>然后，那个index.php就不见了。</p><h2 id="可能会出现重写功能检测失败的错误"><a href="#可能会出现重写功能检测失败的错误" class="headerlink" title="#可能会出现重写功能检测失败的错误"></a><a href="https://conimi.com/archives/15/#%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%87%BA%E7%8E%B0%E9%87%8D%E5%86%99%E5%8A%9F%E8%83%BD%E6%A3%80%E6%B5%8B%E5%A4%B1%E8%B4%A5%E7%9A%84%E9%94%99%E8%AF%AF">#</a><strong>可能会出现重写功能检测失败的错误</strong></h2><p><img src="https://raw.githubusercontent.com/DisruptiveEra/image/main/Hexo/63b94dc96fe3e.png" alt="typecho伪静态-error"></p><p>勾选启用此功能</p><p>保存</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> 文档 </category>
          
          <category> Typecho </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typecho </tag>
            
            <tag> Rewrite </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker虚拟网卡</title>
      <link href="/docker%E8%99%9A%E6%8B%9F%E7%BD%91%E5%8D%A1/"/>
      <url>/docker%E8%99%9A%E6%8B%9F%E7%BD%91%E5%8D%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="1-创建docker网卡"><a href="#1-创建docker网卡" class="headerlink" title="1.创建docker网卡"></a>1.创建docker网卡</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@i ~]<span class="hljs-comment"># brctl addbr docker0</span><br>[root@i ~]<span class="hljs-comment"># ip addr add 192.168.42.1/24 dev docker0  </span><br><span class="hljs-comment"># 这里的ip是给docker内部用的, 随意配置一个即可</span><br>[root@i ~]<span class="hljs-comment"># ip link set dev docker0 up</span><br>[root@i ~]<span class="hljs-comment"># ip addr show docker0</span><br><span class="hljs-comment"># 查看docker</span><br>[root@i ~]<span class="hljs-comment"># systemctl restart docker</span><br>[root@i ~]<span class="hljs-comment"># systemctl restart docker</span><br><span class="hljs-comment"># 启动docker服务</span><br></code></pre></td></tr></table></figure><h2 id="2-添加子网"><a href="#2-添加子网" class="headerlink" title="2.添加子网"></a>2.添加子网</h2><figure class="highlight golo"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs golo">[root<span class="hljs-meta">@i</span> ~]<span class="hljs-comment"># docker network create backend</span><br><span class="hljs-comment"># 这样我们就创建了backend子网，docker-compose就可以直接使用这个network</span><br><span class="hljs-comment"># 如果无法常见子网，则使用下面的命令，跳过安全问题</span><br> <br>[root<span class="hljs-meta">@i</span> ~]<span class="hljs-comment"># docker network create backend --subnet 172.24.24.0/24</span><br> <br>[root<span class="hljs-meta">@i</span> ~]<span class="hljs-comment"># docker network ls</span><br>NETWORK ID     NAME        DRIVER       SCOPE<br><span class="hljs-number">6</span>afff4d90f05    backend       bridge       <span class="hljs-keyword">local</span><br><span class="hljs-number">57</span>de7f32064e    bridge       bridge       <span class="hljs-keyword">local</span><br><span class="hljs-number">4</span>b44a5340d6e    host        host        <span class="hljs-keyword">local</span><br>ac8e8ffe243f    none        <span class="hljs-literal">null</span>        <span class="hljs-keyword">local</span><br></code></pre></td></tr></table></figure><p>这里可以看到有backend</p><h2 id="3-删除网卡"><a href="#3-删除网卡" class="headerlink" title="3.删除网卡"></a>3.删除网卡</h2><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">用 ifconfig 发现有个叫 br-<span class="hljs-number">59</span>ec53121ef6 的网桥<span class="hljs-number">172.19.0.1</span>，<br>如果要删除：<br><br></code></pre></td></tr></table></figure><p>docker network rm $(docker network ls)</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey"><br>```undefined<br>ifconfig br-<span class="hljs-number">59</span>ec53121ef6 down<br>brctl delbr br-<span class="hljs-number">59</span>ec53121ef6<br></code></pre></td></tr></table></figure><p>brctl命令安装：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crystal">Centos系统<br><span class="hljs-variable">$ </span>yum install -y bridge-utils<br><br>Ubuntu系统   <br><span class="hljs-variable">$ </span>apt-get  install -y bridge-utils<br></code></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs"><br><br></code></pre></td></tr></table></figure><p>[root@i ~]# brctl show<br>#查看网桥状态<br>bridge name   bridge id        STP enabled   interfaces<br>br-5db3fa0c465f     8000.02424cfb3937    no       veth038d483<br>                            veth2950f5c<br>                            veth669dc5e<br>                            veth715203f<br>                            veth9f31643<br>                            vethd0f5330<br>docker0     8000.3a4803cd6298    no       veth9d3badb<br>                            vethd7530fd<br>[root@i ~]# brctl delif &lt;网桥名&gt; &lt;端口名&gt;<br>#卸载网桥上的端口<br>[root@i ~]# ifconfig<br>#查看是否有网桥网卡名<br>[root@i ~]# ifconfig &lt;网桥名&gt; down<br>#关闭此网卡<br>[root@i ~]# brctl delbr &lt;网桥名&gt;<br>#删除网桥</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs awk"><br><br>**补充：[Docker](https:<span class="hljs-regexp">//</span>www.anquanclub.cn<span class="hljs-regexp">/tag/</span>docker)-Compose 自动创建的网桥与局域网冲突的终极解决方案**<br><br><span class="hljs-comment">## 一、问题描述</span><br><br>在使用 docker-compose 部署应用时， docker 默认的网络模式是 bridge ，默认网段是 <span class="hljs-number">172.17</span>.<span class="hljs-number">0.1</span><span class="hljs-regexp">/16。十分不巧的是我们自己物理机的局域网也使用的是 172.18.0.1/</span><span class="hljs-number">16</span> 的网段。<br><br>在执行 docker-compose -f docker-compose.yml up -d 部署服务后，自动生成的网桥会依次使用 <span class="hljs-number">172.18</span>.x.x，然而悲催的事情发生了。docker 生成的网桥与局域网冲突了。<br><br>于是乎，面向百度编程的漫漫长路开始了… …，但是，通过一次次的百度和谷歌，找到好多好多复制来复制去的博客，最终一遍一遍的试错，最终也没有解决我的问题，于是乎，这篇含金量达到 <span class="hljs-number">99.9999999999999999999999999</span>% 的文章出炉了。<br><br>![图片[<span class="hljs-number">1</span>]-docker-compose创建网桥,添加子网,删除网卡的实现_docker-安全小天地](https:<span class="hljs-regexp">//im</span>ages.tnxw.com<span class="hljs-regexp">/i/</span><span class="hljs-number">2023</span><span class="hljs-regexp">/01/</span><span class="hljs-number">13</span>/<span class="hljs-number">63</span>c13392168d7.jpeg)<br><br>本次实验环节的 Docker 版本<br><br></code></pre></td></tr></table></figure><p>[root@node100 docker-compose]# docker info | grep ‘Server Version’<br> Server Version: 19.03.12</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br>## 二、解决方案<br><br>停止 docker-compose 创建的容器<br><br></code></pre></td></tr></table></figure><p>docker-compose -f docker-compose.yml down</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs"><br>操作 Docker 容器<br><br></code></pre></td></tr></table></figure><h1 id="停止-Docker-容器"><a href="#停止-Docker-容器" class="headerlink" title="停止 Docker 容器"></a>停止 Docker 容器</h1><p>sudo systemctl stop docker</p><h1 id="停止-docker0-网桥"><a href="#停止-docker0-网桥" class="headerlink" title="停止 docker0 网桥"></a>停止 docker0 网桥</h1><p>sudo ip link set dev docker0 down</p><h1 id="删除-docker0-网桥"><a href="#删除-docker0-网桥" class="headerlink" title="删除 docker0 网桥"></a>删除 docker0 网桥</h1><p>sudo brctl delbr docker0</p><h1 id="重置-iptables"><a href="#重置-iptables" class="headerlink" title="重置 iptables"></a>重置 iptables</h1><p>sudo iptables -t nat -F POSTROUTING</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><br><span class="hljs-selector-tag">P</span><span class="hljs-selector-class">.S</span><br><br></code></pre></td></tr></table></figure><h1 id="linux-brctl-command-not-found，安装-brctl"><a href="#linux-brctl-command-not-found，安装-brctl" class="headerlink" title="linux brctl command not found，安装 brctl"></a>linux brctl command not found，安装 brctl</h1><p>yum install bridge-utils -y</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><br>修改 daemon.<span class="hljs-keyword">json</span><br><span class="hljs-keyword"></span><br></code></pre></td></tr></table></figure><h1 id="编辑-daemon-json-文件"><a href="#编辑-daemon-json-文件" class="headerlink" title="编辑 daemon.json 文件"></a>编辑 daemon.json 文件</h1><p>vim &#x2F;etc&#x2F;docker&#x2F;daemon.json</p><h1 id="添加如下内容，包含设置-Docker-容器的-IP-网段"><a href="#添加如下内容，包含设置-Docker-容器的-IP-网段" class="headerlink" title="添加如下内容，包含设置 Docker 容器的 IP 网段"></a>添加如下内容，包含设置 Docker 容器的 IP 网段</h1><p>“default-address-pools” : [<br>  {<br>   “base” : “192.168.0.0&#x2F;16”,<br>   “size” : 24<br>  }<br>]</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><br>P<span class="hljs-selector-class">.S</span><br><br>注意：如果 daemon<span class="hljs-selector-class">.json</span> 中包含了其它的内容，请切记语法格式的正确性，比如用逗号隔开。<br><br>重启 Docker 容器<br><br></code></pre></td></tr></table></figure><p>sudo systemctl daemon-reload<br>sudo systemctl start docker</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs"><br>重新安装和启动 docker-compose 的命令<br><br></code></pre></td></tr></table></figure><p>docker-compose -f docker-compose.yml up -d</p><pre><code class="hljs">## 三、拓展方案[点击此处](https://www.anquanclub.cn/?golink=aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9jb21wb3NlL2lzc3Vlcy80MzM2)获取 ISSUES 大佬们给出的一些解决方案方案一![图片](https://images.tnxw.com/i/2023/01/13/63c13399642c2.jpeg)方案二![图片2](https://images.tnxw.com/i/2023/01/13/63c1339c5e94a.jpeg)方案三![图片3](https://images.tnxw.com/i/2023/01/13/63c1339f87629.jpeg)以上为个人经验，希望能给大家一个参考，也希望大家多多支持安全小天地。如有错误或未考虑完全的地方，望不吝赐教。</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker,网卡 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker推送命令</title>
      <link href="/docker%E6%8E%A8%E9%80%81%E5%91%BD%E4%BB%A4/"/>
      <url>/docker%E6%8E%A8%E9%80%81%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>Docker 推送命令<br>在项目中标记镜像：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">docker <span class="hljs-keyword">tag</span> <span class="hljs-title">oldiy</span>/dosgame-web-docker:latest hub.tnxw.com/momo/dosgame-web-docker:latest<br></code></pre></td></tr></table></figure><p>推送镜像到当前项目：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">docker <span class="hljs-keyword">push</span> hub.tnxw.com<span class="hljs-regexp">/momo/</span>dosgame-web-docker:latest<br></code></pre></td></tr></table></figure><p>Helm 推送命令<br>在项目中打包 chart</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">helm <span class="hljs-keyword">package</span> <span class="hljs-title">CHART_PATH</span><br></code></pre></td></tr></table></figure><p>推送 chart 到当前项目</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">helm <span class="hljs-built_in">push</span> CHART_PACKAGE oci:<span class="hljs-comment">//hub.tnxw.com/momo</span><br></code></pre></td></tr></table></figure><p>CNAB 推送命令<br>推送 CNAB 到当前项目</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">cnab-<span class="hljs-selector-tag">to</span>-oci push CNAB_PATH <span class="hljs-attr">--target</span> hub<span class="hljs-selector-class">.tnxw</span><span class="hljs-selector-class">.com</span>/momo/REPOSITORY<span class="hljs-selector-attr">[:TAG]</span> <span class="hljs-attr">--auto-update-bundle</span><br></code></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Harbor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
