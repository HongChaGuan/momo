---
title: 私有魔兽注册网站
excerpt: >-
  WoWSimpleRegistration是azerothcore官方提供的账号注册页面的项目，同TrinityCore类似，azerothcore也是一个模拟魔兽世界的开源项目，WoWSimpleRegistration同样也支持TrinityCore的账号注册。
tags:
  - 游戏
  - 魔兽世界
categories:
  - 学习笔记
  - 游戏
index_img: /img/banner/wow.jpeg
abbrlink: e5f1e82a
date: 2023-06-07 13:05:31
sticky:
---

## 注册网站

### 环境安装

#### 1.源安装

```
apt update && apt install nginx php-fpm php-gmp php-gd php-soap php-mbstring php-pdo php-pdo-mysql
```

然后输入 `vim /etc/nginx/sites-available/default`，将` location ~ \.php$ {`、`include snippets/fastcgi-php.conf;`、`fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;` 和下面的} 前面的#去掉。

并在 `index `后面输入 `index.php`。



退出编辑后，输入 `service nginx restart && service php7.4-fpm restart` 重启服务。

#### 2.Docker安装

 下载[Dockerfile](https://github.com/linuxserver/docker-nginx),使用 `docker build`构建自己的镜像,根据自身情况修改下面compose的参数。

 ```
version: "2.1"
services:
  nginx:
    image: lscr.io/linuxserver/nginx:latest
    container_name: nginx
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
    volumes:
      - ./config:/config
    ports:
      - 80:80
      - 443:443
    restart: unless-stopped
 ```
 




### 网站搭建



注册网站推荐 WoWSimpleRegistration，点击[此处](https://github.com/azerothcore/WoWSimpleRegistration/archive/refs/heads/master.zip)下载压缩包解压，将 `application/config/ `内的 `config.php.sample `文件复制并重命名为 `config.php`，`config.php` 文件就是该源码的配置文件。

```
=====================================================================
$config['baseurl'] = "localhost";  #本地访问默认为localhost，外网访问请正确更正为你的网址，否则图片路径错误不显示
=====================================================================
=====================================================================
$config['language'] = "chinese-simplified";  #修改默认语言为中文
=====================================================================
$config['realmlist'] = 'IP地址';  #IP地址替换为你的局域网或外网地址
$config['patch_location'] = 'http://mypatch.com/patch.mpq';  #其中http://mypatch.com/patch.mpq更改为你更新包的地址，可不修改
=====================================================================
$config['expansion'] = '2';  #修改为0，以适配wlk客户端
=====================================================================
$config['server_core'] = 1;  #修改为1，以适配AC源码
=====================================================================
$config['disable_changepassword'] = true;  #修改为true，否则在开启SOAP后会出现异常
=====================================================================
$config['template'] = 'advance';  #此处为主题选择，我这里选的是advance
=====================================================================
#以下为邮箱设置，请设置为自己的邮箱STMP信息
$config['smtp_host'] = 'smtp1.example.com';
$config['smtp_port'] = 587;
$config['smtp_auth'] = true;
$config['smtp_user'] = 'user@example.com';
$config['smtp_pass'] = 'SECRET';
$config['smtp_secure'] = 'tls';
$config['smtp_mail'] = 'no-reply@example.com';
=====================================================================
$config['soap_for_register'] = true;  #开启SOAP
=====================================================================
$config['soap_uri'] = 'urn:AC';  #更改为urn:AC，以适配AC源码
=====================================================================
$config['soap_username'] = 'Ikun';  #输入你服务端的一个GM号的用户名
$config['soap_password'] = 'password';  #输入你服务端的一个GM号的密码
=====================================================================
#顾名思义，以下内容更改为你acore_auth数据库的信息
$config['db_auth_host'] = '127.0.0.1';
$config['db_auth_port'] = '3306';
$config['db_auth_user'] = 'root';
$config['db_auth_pass'] = 'password';
$config['db_auth_dbname'] = 'acore_auth';
=====================================================================
#顾名思义，以下内容更改为你acore_characters数据库的信息
$config['realmlists'] = array(
    "1" => array(
        'realmid' => 1, // Realm ID
        'realmname' => "Ikun", // Realm Name
        'db_host' => "127.0.0.1", // MySQL Host IP
        'db_port' => "3306", // MySQL Host Port
        'db_user' => "root", // MySQL username
        'db_pass' => 'password', // MySQL password
        'db_name' => "acore_characters" // Characters database name
```

Docker安装方式：将修改后的文件全部复制到`./config/www/`目录下。

### 开启 SOAP

输入 `vim /root/azeroth-server/etc/worldserver.conf `命令，然后输入` /SOAP` 查找 SOAP 值，找到 `SOAP.Enabled = 0 `后回车按 i 键，修改为` SOAP.Enabled = 1`，按 Esc 键输入`:wq` 后即可保存退出，重启服务端后即可使用网站注册账号。

### 防火墙配置

魔兽世界服务端所需的端口为`3306` `3724`，注册网站所需要的端口为`80`。如果按以上教程搭建，外网仍无法访问，请自行查看服务器防火墙是否放行上述端口。



